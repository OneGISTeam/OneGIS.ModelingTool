<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<script src="./plugins/jquery/jquery-1.10.2.js"></script>
    <!-- 引入 ECharts 文件 -->
    <script src="./plugins/echarts/echarts.js"></script>
	<script src="./plugins/echarts/datatool.js"></script>
</head>
<body>
    <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
    <div id="main" style="text-align:center;width: 900px;height:600px;"></div>
	<script type="text/javascript">
       var myChart = null;
		$(function(){
			var clientWidth = document.body.clientWidth;
			var clientHeight = document.body.clientHeight;
			$("#main").width(clientWidth);
			$("#main").height(clientHeight);
			// 基于准备好的dom，初始化echarts实例
			myChart = echarts.init(document.getElementById('main'));
			myChart.showLoading();
		});
		
		function loadData(data){
			var json = JSON.parse(data);
			var categories = [];
			var legend = json.legend[0].data;

			for(var i=0; i<legend.length; i++){
				var cate = {
					"name": legend[i]
				};
				categories.push(cate);
			}
			var option = {
				"title": {
					"text": "关联关系和弦图可视化",
					"top": "bottom",
					"left": "left"
				},
				"tooltip": {},
				"legend": json.legend,
				"animationDurationUpdate": 1500,
				"animationEasingUpdate": "quinticInOut",
				"series": [{
					"name": "关联关系和弦图可视化",
					"type": "graph",
					"layout": "circular",
					"circular": {
						"rotateLabel": true
					},
					"data": json.data,
					"links": json.links,
					"categories": categories,
					"roam": true,
					"label": {
						"normal": {
							"position": "right",
							"formatter": "{b}"
						}
					},
					"lineStyle": {
						"normal": {
							"color": "source",
							"curveness": json.curveness
						}
					}
				}]
			};
			myChart.hideLoading();
			myChart.setOption(option);
		}
		
    </script>
</body>

</html>